<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog | nihongotext.com</title>
  <link rel="icon" href="/favicon.ico" />
  <base href="/" />

  <style>
    :root{--ink:#132c3a;--muted:#6b7280;--brand:#e6462d}
    body{margin:0;font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Yu Gothic", Meiryo, sans-serif;color:var(--ink);line-height:1.7}
    main .wrap{max-width:1100px;margin:auto;padding:14px 16px}
    .muted{color:var(--muted)}
    article{padding:18px 16px;border-bottom:1px solid #f0f0f0}
    h2{margin:.2rem 0 0.5rem}
    time{color:var(--muted);font-size:.9rem}
    [data-i18n][data-lang="en"] .ja{display:none}
    [data-i18n][data-lang="en"] .en{display:block}
    [data-i18n][data-lang="ja"] .en{display:none}
    [data-i18n][data-lang="ja"] .ja{display:block}
    ruby{ruby-position:over; ruby-align:start}
    rt{font-size:.6em;color:#666;letter-spacing:.03em}
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9QSHWJE0HZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-9QSHWJE0HZ');
  </script>
</head>
<body>
  <!-- 共通ヘッダーを挿入 -->
  <div id="header"></div>

  <main>
    <div class="wrap" id="page" data-i18n data-lang="en">
      <div class="en"><h1>Blog</h1><p class="muted">Updates and notes from nihongotext.com</p></div>
      <div class="ja"><h1>ブログ</h1><p class="muted">nihongotext.com からのお知らせ</p></div>

      <article>
        <time datetime="2025-10-31">2025-10-31</time>
        <div class="en">
          <h2>We added an inquiry admin panel</h2>
          <p>Now you can manage inquiries, export CSV, and open the sheet from the admin page.</p>
        </div>
        <div class="ja">
          <h2>
            お問い合わせ<ruby><rb>管理</rb><rt>かんり</rt></ruby><ruby><rb>画面</rb><rt>がめん</rt></ruby>を<ruby><rb>追加</rb><rt>ついか</rt></ruby>しました
          </h2>
          <p>
            これからは<ruby><rb>管理</rb><rt>かんり</rt></ruby>ページから<ruby><rb>問い合わせ</rb><rt>といあわ</rt></ruby>の
            <ruby><rb>管理</rb><rt>かんり</rt></ruby>・CSV<ruby><rb>出力</rb><rt>しゅつりょく</rt></ruby>・
            シート<ruby><rb>表示</rb><rt>ひょうじ</rt></ruby>ができます。
          </p>
        </div>
      </article>

      <article>
        <time datetime="2025-10-25">2025-10-25</time>
        <div class="en">
          <h2>Site roadmap</h2>
          <p>Next we’ll improve the Blog with a JP/EN toggle and furigana for learners.</p>
        </div>
        <div class="ja">
          <h2>サイト<ruby><rb>計画</rb><rt>けいかく</rt></ruby></h2>
          <p>
            つぎはブログに<ruby><rb>日本語</rb><rt>にほんご</rt></ruby>／English
            <ruby><rb>切替</rb><rt>きりかえ</rt></ruby>と
            <ruby><rb>漢字</rb><rt>かんじ</rt></ruby>の
            <ruby><rb>ふりがな</rb><rt>ふりがな</rt></ruby>を
            <ruby><rb>導入</rb><rt>どうにゅう</rt></ruby>します。
          </p>
        </div>
      </article>
    </div>
  </main>

  <!-- 共通フッターを挿入 -->
  <div id="footer"></div>

  <script>
    // ==== 共通ヘッダー・フッター読込 ====
    async function loadPartials(){
      const header = await fetch('/partials/header.html');
      const footer = await fetch('/partials/footer.html');
      document.getElementById('header').innerHTML = await header.text();
      document.getElementById('footer').innerHTML = await footer.text();

      // 言語切替ボタンを探して動作させる
      const page = document.getElementById('page');
      const btnEn = document.querySelector('#btn-en');
      const btnJa = document.querySelector('#btn-ja');
      if(btnEn && btnJa){
        btnEn.addEventListener('click', ()=>applyLang('en'));
        btnJa.addEventListener('click', ()=>applyLang('ja'));
      }
    }

    // ==== 言語切替 ====
    function applyLang(lang){
      const page = document.getElementById('page');
      if(!page) return;
      page.setAttribute('data-lang', lang);
      document.documentElement.lang = (lang === 'ja' ? 'ja' : 'en');
      localStorage.setItem('nt_lang', lang);
      if (window.gtag) gtag('event', 'language_change', {language: lang});
    }

    // ==== 初期処理 ====
    document.addEventListener('DOMContentLoaded', async ()=>{
      await loadPartials();
      const saved = localStorage.getItem('nt_lang');
      const initial = saved || ((navigator.language||'en').startsWith('ja') ? 'ja' : 'en');
      applyLang(initial);
    });
  </script>
</body>
</html>
